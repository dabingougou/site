---
import '../styles/global.css';
import { getCollection } from 'astro:content';
const projects = await getCollection('projects');
const base = import.meta.env.BASE_URL;
const basePrefix = base.endsWith('/') ? base : base + '/';
const href = (path = '') => basePrefix + String(path).replace(/^\/+/, '');
const resolveLink = (url = '') => {
  const s = String(url || '');
  if (!s) return s;
  if (/^https?:\/\//i.test(s) || s.startsWith('mailto:')) return s;
  const normalized = s.replace(/^\/site\//, '').replace(/^\/+/, '');
  return href(normalized);
};
---
<html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Projects</title></head><body><main class="container"><h1>Projects</h1><ul>{projects.map((p) => (<li><strong>{p.data.title}</strong> — {p.data.summary}{p.data.links?.repo && <> <a href={resolveLink(p.data.links.repo)} target="_blank" rel="noopener noreferrer">Repo</a></>}{p.data.links?.demo && <> · <a href={resolveLink(p.data.links.demo)} target="_blank" rel="noopener noreferrer">Notebook</a></>}{p.data.links?.report && <> · <a href={resolveLink(p.data.links.report)} target="_blank" rel="noopener noreferrer">PDF report</a></>}</li>))}</ul><a href={base}>Back home</a> · <a href={href('papers/')}>Papers</a></main></body></html>
